!function(t,n,i){var e=window.osm,s=e.Field;e.Field=s.extend({$lat:function(){return this.$el.closest(".acf-field-settings").find('input[id$="-center_lat"]')},$lng:function(){return this.$el.closest(".acf-field-settings").find('input[id$="-center_lng"]')},$zoom:function(){return this.$el.closest(".acf-field-settings").find('input[id$="-zoom"]')},$returnFormat:function(){return this.$el.closest(".acf-field-settings").find('[data-name="return_format"]')},getMapData:function(){return{lat:parseFloat(this.$lat().val()||this.$el.data().mapLat),lng:parseFloat(this.$lng().val()||this.$el.data().mapLng),zoom:parseInt(this.$zoom().val()||this.$el.data().mapZoom),layers:this.$el.data().mapLayers}},initialize:function(t){s.prototype.initialize.apply(this,[t]),this.bindMapListener(),this.bindListener()},updateInput:function(){this.$lat().val(this.model.get("lat")).trigger("change"),this.$lng().val(this.model.get("lng")).trigger("change"),this.$zoom().val(this.model.get("zoom")).trigger("change")},init_locator_add:function(){},initLayers:function(){this.model.get("layers");this.config.restrict_providers="osm"===this.$returnFormat().find(":checked").val()?Object.values(n.options.osm_layers):Object.values(n.options.leaflet_layers),s.prototype.initLayers.apply(this,arguments);var i=t(this.layersControl.getContainer()).find('[type="radio"],[type="checkbox"]'),e=this.$zoom().attr("name").replace("[zoom]","[layers][]");return i.each(function(n,i){var s=t(i);t(i).attr("name",e).attr("value",s.next().text().trim())}),this},bindInputListener:function(){var n=this;this.$lat().on("change",function(i){n.model.set("lat",t(i.target).val()),n.update_map()}).on("focus",function(t){n.unbindMapListener()}).on("blur",function(t){n.bindMapListener()}),this.$lng().on("change",function(i){n.model.set("lng",t(i.target).val()),n.update_map()}).on("focus",function(t){n.unbindMapListener()}).on("blur",function(t){n.bindMapListener()}),this.$zoom().on("change",function(i){n.model.set("zoom",t(i.target).val()),n.update_map()}).on("focus",function(t){n.unbindMapListener()}).on("blur",function(t){n.bindMapListener()})},bindMapListener:function(){this.listenTo(this.model,"change:lat",this.updateInput),this.listenTo(this.model,"change:lng",this.updateInput),this.listenTo(this.model,"change:zoom",this.updateInput)},bindListener:function(){var t=this;this.$returnFormat().on("change",function(n){var i=t.model.get("layers");t.resetLayers(),t.model.set("layers",i),t.initLayers()})},unbindInputListener:function(){this.$lat().off("change").off("focus").off("blur"),this.$lng().off("change").off("focus").off("blur"),this.$zoom().off("change").off("focus").off("blur")},unbindMapListener:function(){this.stopListening(this.model,"change:lat",this.updateInput),this.stopListening(this.model,"change:lng",this.updateInput),this.stopListening(this.model,"change:zoom",this.updateInput)},update_visible:function(){var t=this.visible;s.prototype.update_visible.apply(this,arguments),t!==this.visible&&(this.visible?this.bindInputListener():this.unbindInputListener())}})}(jQuery,acf_osm_admin);